/*! supercal 2014-02-14 */
function ClusterIcon(a,b){a.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.cluster_=a,this.styles_=b,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(a.getMap())}function Cluster(a){this.markerClusterer_=a,this.map_=a.getMap(),this.gridSize_=a.getGridSize(),this.minClusterSize_=a.getMinimumClusterSize(),this.averageCenter_=a.getAverageCenter(),this.printable_=a.getPrintable(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,a.getStyles())}function MarkerClusterer(a,b,c){this.extend(MarkerClusterer,google.maps.OverlayView),b=b||[],c=c||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=c.gridSize||60,this.minClusterSize_=c.minimumClusterSize||2,this.maxZoom_=c.maxZoom||null,this.styles_=c.styles||[],this.title_=c.title||"",this.zoomOnClick_=!0,void 0!==c.zoomOnClick&&(this.zoomOnClick_=c.zoomOnClick),this.averageCenter_=!1,void 0!==c.averageCenter&&(this.averageCenter_=c.averageCenter),this.ignoreHidden_=!1,void 0!==c.ignoreHidden&&(this.ignoreHidden_=c.ignoreHidden),this.printable_=!1,void 0!==c.printable&&(this.printable_=c.printable),this.imagePath_=c.imagePath||MarkerClusterer.IMAGE_PATH,this.imageExtension_=c.imageExtension||MarkerClusterer.IMAGE_EXTENSION,this.imageSizes_=c.imageSizes||MarkerClusterer.IMAGE_SIZES,this.calculator_=c.calculator||MarkerClusterer.CALCULATOR,this.batchSize_=c.batchSize||MarkerClusterer.BATCH_SIZE,this.batchSizeIE_=c.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE,-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(b,!0),this.setMap(a)}function tableAlter(){$("table.alter").each(function(a,b){var c="odd";$("tr",$(b)).each(function(){c="odd"==c?"even":"odd",$(this).addClass(c)}),delete c})}function debugMode(){$(document).keydown(function(a){17==a.keyCode&&$("body").toggleClass("debug")})}function builReg(){$('select[name="region"]').each(function(a,b){var c=$(b),d=regDep.r,e=c.prop?c.prop("options"):c.attr("options");c.find("option").remove().end().append("<option></option>");for(var a in d)e[e.length]=new Option(d[a].name,d[a].code);c.val(c.data("sel")).on("change",function(){$(this).data("dep")&&builDep(this)})})}function builDep(a){var b=a?$(a).data("dep"):'select[name="dep"]';$(b).each(function(b,c){for(var d=$(c),e=a?$(a).val():"",f=regDep.r,g=regDep.d,h=[],i=[],j=0;j<f.length;j++)if(f[j].code==e){h=$.map(f[j].dep,function(a){return String(a)});break}for(var j=0;j<g.length;j++)h.indexOf(g[j].code)>=0&&i.push(g[j]);0==i.length&&(i=g);var k=d.prop?d.prop("options"):d.attr("options");d.find("option").remove().end().append("<option></option>");for(var b in i)k[k.length]=new Option(i[b].code+" "+i[b].name,i[b].code);d.val(d.data("sel"))})}function buildType(){var a=$('select[name="type"]');if(0!=a.length){var b=a.prop?a.prop("options"):a.attr("options");for(var c in mvs.t)b[b.length]=new Option(mvs.t[c].name,mvs.t[c].id);a.val(a.data("sel")),a.on("change",buildCategory),buildCategory()}}function buildCategory(){var a=$('select[name="category"]');if(0!=a.length){var b=$('select[name="type"]').val(),c={};for(f in mvs.t)c[mvs.t[f].id]=f;var d=mvs.c[c[b]],e=a.prop?a.prop("options"):a.attr("options");a.find("option").remove().end();for(var f in d)e[e.length]=new Option(d[f].name,d[f].id);a.val(a.data("sel"))}}function datePicker(){$("#searchDatePicker").datepicker({weekStart:1}).on("changeDate",function(a){"days"==a.viewMode&&$(".datepicker").css("display","none")})}function formValidate(){var a=$("form.check");a.length&&a.parsley({inputs:"input, textarea, select",excluded:"input[type=hidden]",trigger:!1,focus:"first",successClass:"parsley-success",errorClass:"parsley-error",validators:{},showErrors:!0,messages:{},validateIfUnchanged:!1,errors:{classHandler:function(){},container:function(){},errorsWrapper:!1,errorElem:!1},listeners:{onFieldValidate:function(){return!1},onFormSubmit:function(){},onFieldError:function(){},onFieldSuccess:function(){}}})}function cleanSearch(){$("#cleanSearch").click(function(){$(".search-clean").val(""),$(this).parents("form").submit()})}!function(a){var b=function(b,d){if(this.element=a(b),this.format=c.parseFormat(d.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=a(c.template).appendTo("body").on({click:a.proxy(this.click,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this)}):this.component?this.component.on("click",a.proxy(this.show,this)):this.element.on("click",a.proxy(this.show,this)),this.minViewMode=d.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=d.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=d.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=d.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};b.prototype={constructor:b,show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),!this.isInput;var c=this;a(document).on("mousedown",function(b){0==a(b.target).closest(".datepicker").length&&c.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var a=c.formatDate(this.date,this.format);this.isInput?this.element.prop("value",a):(this.component&&this.element.find("input").prop("value",a),this.element.data("date",a))},setValue:function(a){this.date="string"==typeof a?c.parseDate(a,this.format):new Date(a),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},place:function(){var b=this.component?this.component.offset():this.element.offset();b.left+this.picker.width()>a("document").width()&&(b.left=b.left-this.picker.width()),this.picker.css({top:b.top+this.height,left:b.left})},update:function(a){this.date=c.parseDate("string"==typeof a?a:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+c.dates.daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+c.dates.monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").append(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),d=a.getMonth(),e=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(c.dates.months[d]+" "+b);var f=new Date(b,d-1,28,0,0,0,0),g=c.getDaysInMonth(f.getFullYear(),f.getMonth());f.setDate(g),f.setDate(g-(f.getDay()-this.weekStart+7)%7);var h=new Date(f);h.setDate(h.getDate()+42),h=h.valueOf();for(var i,j,k,l=[];f.valueOf()<h;)f.getDay()===this.weekStart&&l.push("<tr>"),i=this.onRender(f),j=f.getFullYear(),k=f.getMonth(),d>k&&j===b||b>j?i+=" old":(k>d&&j===b||j>b)&&(i+=" new"),f.valueOf()===e&&(i+=" active"),l.push('<td class="day '+i+'">'+f.getDate()+"</td>"),f.getDay()===this.weekEnd&&l.push("</tr>"),f.setDate(f.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(l.join(""));var m=this.date.getFullYear(),n=this.picker.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active");m===b&&n.eq(this.date.getMonth()).addClass("active"),l="",b=10*parseInt(b/10,10);var o=this.picker.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;for(var p=-1;11>p;p++)l+='<span class="year'+(-1===p||10===p?" old":"")+(m===b?" active":"")+'">'+b+"</span>",b+=1;o.html(l)},click:function(b){b.stopPropagation(),b.preventDefault();var d=a(b.target).closest("span, td, th");if(1===d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+c.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+c.modes[this.viewMode].navFnc].call(this.viewDate)+c.modes[this.viewMode].navStep*("prev"===d[0].className?-1:1)),this.fill(),this.set()}break;case"span":if(d.is(".month")){var e=d.parent().find("span").index(d);this.viewDate.setMonth(e)}else{var f=parseInt(d.text(),10)||0;this.viewDate.setFullYear(f)}0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:c.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(d.is(".day")&&!d.is(".disabled")){var g=parseInt(d.text(),10)||1,e=this.viewDate.getMonth();d.is(".old")?e-=1:d.is(".new")&&(e+=1);var f=this.viewDate.getFullYear();this.date=new Date(f,e,g,0,0,0,0),this.viewDate=new Date(f,e,Math.min(28,g),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:c.modes[this.viewMode].clsName})}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+c.modes[this.viewMode].clsName).show()}},a.fn.datepicker=function(c,d){return this.each(function(){var e=a(this),f=e.data("datepicker"),g="object"==typeof c&&c;f||e.data("datepicker",f=new b(this,a.extend({},a.fn.datepicker.defaults,g))),"string"==typeof c&&f[c](d)})},a.fn.datepicker.defaults={onRender:function(){return""}},a.fn.datepicker.Constructor=b;var c={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],daysMin:["Di","Lu","Ma","Me","Je","Ve","Sa","Di"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Décembre"],monthsShort:["Jan","Fév","Mar","Avr","Mai","Juin","Jui.","Aout","Sep.","Oct.","Nov.","Déc."]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,c.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},parseFormat:function(a){var b=a.match(/[.\/\-\s].*?/),c=a.split(/\W+/);if(!b||!c||0===c.length)throw new Error("Invalid date format.");return{separator:b,parts:c}},parseDate:function(a,b){var c,d=a.split(b.separator),a=new Date;if(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),d.length===b.parts.length){for(var e=a.getFullYear(),f=a.getDate(),g=a.getMonth(),h=0,i=b.parts.length;i>h;h++)switch(c=parseInt(d[h],10)||1,b.parts[h]){case"dd":case"d":f=c,a.setDate(c);break;case"mm":case"m":g=c-1,a.setMonth(c-1);break;case"yy":e=2e3+c,a.setFullYear(2e3+c);break;case"yyyy":e=c,a.setFullYear(c)}a=new Date(e,g,f,0,0,0)}return a},formatDate:function(a,b){var c={d:a.getDate(),m:a.getMonth()+1,yy:a.getFullYear().toString().substring(2),yyyy:a.getFullYear()};c.dd=(c.d<10?"0":"")+c.d,c.mm=(c.m<10?"0":"")+c.m;for(var a=[],d=0,e=b.parts.length;e>d;d++)a.push(c[b.parts[d]]);return a.join(b.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};c.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+c.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+c.headTemplate+c.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+c.headTemplate+c.contTemplate+"</table></div></div>"}(window.jQuery);var KAPMap={currentId:1,mapOptions:{},map:{},geocoder:{},polygons:{},manager:{},$map:{},markerStore:[],cluster:null,opt:{disableDefaultUI:!0,center:{lat:"46.2276380",lng:"2.2137490",zoom:"5"},polyStyle:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35},clusterOptions:{gridSize:50,maxZoom:14},allowSave:!1,allowGeocode:!1,onInit:null,allowProto:!0},init:function(a,b){$.extend(!0,this.opt,a),this.setMapOptions(),this.opt.allowMarkerProto&&this.opt.zoom&&(this.mapOptions.zoom=this.opt.zoom),this.markerStore=new Array,google.maps.visualRefresh=!0,this.map=new google.maps.Map(b,this.mapOptions),this.geocoder=new google.maps.Geocoder,this.bindMapEvents(),this.opt.disablePrint&&google.maps.event.addListenerOnce(this.map,"idle",$.proxy(function(){this.disablePrint()},this)),google.maps.Polygon.prototype.getBounds=function(){for(var a,b=new google.maps.LatLngBounds,c=this.getPaths(),d=0;d<c.getLength();d++){a=c.getAt(d);for(var e=0;e<a.getLength();e++)b.extend(a.getAt(e))}return b},"function"==typeof this.opt.onInit&&this.opt.onInit(this)},disablePrint:function(){setTimeout(function(){$(".gmnoprint").css("display","none")},1)},bindMapEvents:function(){},_getNextID:function(){return this.currentId=this.currentId+1,this.currentId},setMapCenterOffset:function(a,b,c,d){d&&this.map.setOptions({zoom:parseInt(d)});var e=this.map.getProjection().fromLatLngToPoint(a instanceof google.maps.LatLng?a:this.map.getCenter()),f=new google.maps.Point(("number"==typeof b?b:0)/Math.pow(2,this.map.getZoom())||0,("number"==typeof c?c:0)/Math.pow(2,this.map.getZoom())||0);this.map.panTo(this.map.getProjection().fromPointToLatLng(new google.maps.Point(e.x-f.x,e.y+f.y)))},setMapCenter:function(a,b,c){var c=c||{};c.noAnimation?(this.map.setCenter(a),b&&this.map.setZoom(b)):(this.map.panTo(a),b&&(this._idleEvent=google.maps.event.addListenerOnce(this.map,"idle",$.proxy(function(){this.map.setZoom(b)},this))))},clearEvent:function(a,b){google.maps.event.clearListeners(b,a)},getGeoCode:function(a,b){this.geocoder.geocode(a,$.proxy(function(a,c){c==google.maps.GeocoderStatus.OK?b(a[0]):console.error("Geocoding error "+c)},this))},setAddressMarker:function(a){var b=this,c=new google.maps.Marker({position:a,map:b.map,title:""});this.drawingManager.clearStore(),this.drawingManager.addPoly(c,"marker")},setZoom:function(a){this.map.setOptions({zoom:parseInt(a)})},setLocation:function(a){this.location=a},setMapOptions:function(){var a=[];this.opt.disablePoi&&(a=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]);var b=new google.maps.LatLng(this.opt.center.lat,this.opt.center.lng);this.mapOptions={disableDefaultUI:this.opt.disableDefaultUI,center:b,zoom:parseInt(this.opt.center.zoom),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:a},this.setLocation(b)},getNorthEastBounds:function(){return this._getBounds().getNorthEast()},getSouthWestBounds:function(){return this._getBounds().getSouthWest()},_getBounds:function(){return this.currentBounds=this.map.getBounds(),this.currentBounds},getNearPlaces:function(a,b,c){this.placesService||(this.placesService=new google.maps.places.PlacesService(this.map));var d={location:a,rankBy:google.maps.places.RankBy.DISTANCE,types:c.types||[]};this.placesService.nearbySearch(d,b)},displayMarker:function(a,b,c){a.constructor===Array&&(a=new google.maps.LatLng(a[0],a[1]));var d=new google.maps.Marker({position:a,map:this.map,title:b||""});return c&&c.constructor===google.maps.InfoWindow&&(d._kapinfo=c),this.bind(d),this.markerStore.push(d),d},hideMarker:function(a){a.setVisible(!1),a.setMap(null),a=null},displayMarkerWithLabel:function(a,b,c,d){if(!MarkerWithLabel)throw"displayMarkerWithLabel requires the corresponding utility lib.";var e;e=d?new google.maps.Point(d[0],d[1]):null;var f={position:a,map:this.map,icon:c,labelContent:b,labelAnchor:e,labelClass:"markerlabel"};return this._returnMarker(new MarkerWithLabel(f))},displayCustomMarker:function(a,b,c){a.constructor===Array&&(a=new google.maps.LatLng(a[0],a[1]));var d={position:a,map:this.map,icon:b},e=new google.maps.Marker(d);return c&&c.constructor===google.maps.InfoWindow&&(e._kapinfo=c),this.bind(e),this.markerStore.push(e),e},clusterMarkers:function(){MarkerClusterer&&(this.cluster=new MarkerClusterer(this.map,this.markerStore,this.opt.clusterOptions))},getIcon:function(a,b,c,d){var e;return e=d?new google.maps.Point(d[0],d[1]):null,new google.maps.MarkerImage(a,null,new google.maps.Point(0,0),e,new google.maps.Size(c,b))},_returnMarker:function(a,b){return b&&b.noStore?a:this.opt.noStore?a:(this.markerStore.push(a),a)},clearMarkers:function(){for(var a=0;a<this.markerStore.length;a++)this.markerStore[a].setMap(null),this.markerStore.splice(a,1)},getInfoWindow:function(a){return new google.maps.InfoWindow({content:a})},closeInfoWindows:function(a){for(var b=0;b<this.markerStore.length;b++)this.markerStore[b]._kapinfo&&this.markerStore[b]!==a&&this.markerStore[b]._kapinfo.close()},loadPolygon:function(a){switch(typeof a){case"object":if(a.constructor===Array)return this._loadPolygonFromArray(a);break;default:return this._loadPolygonFromArray(a)}},_loadPolygonFromArray:function(a){if(a.constructor!==Array)throw"_loadPolygonFromArray :: Data is not an Array";for(var b=[],c=0;c<a.length;c++)b.push(new google.maps.LatLng(a[c][0],a[c][1]));var d=this.opt.polyStyle;d.paths=b;var e=this._getNextID(),f=this.polygons[e]=new google.maps.Polygon(d);return this.lastPoly=e,f.setMap(this.map),f},getLastPolygon:function(){return this.polygons[this.lastPoly]},clearPolygons:function(a){for(var b in this.polygons)this.polygons[b].setMap(null),a&&delete this.polygons[b]},drawCircleAndZoomin:function(a,b,c){var d=this.drawCircle(a,b,c);return this.setMapCenter(b,7),d},drawCircle:function(a,b,c){var d={strokeColor:"#78a3d8",strokeOpacity:.8,strokeWeight:2,fillColor:"#78a3d8",fillOpacity:.35,map:this.map,center:b,radius:a};return c&&(d=$.extend({},d,c)),new google.maps.Circle(d)},bind:function(a){"function"!=typeof a.on&&this.opt.allowProto&&(a.on=this.on)},on:function(a,b){google.maps.event.addListener(this,a,b)}};"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a){a.fn.kapmap=function(b){return this.length?this.each(function(){var c=Object.create(KAPMap);c.init(b,this),a.data(this,"kapmap",c)}):void 0}}(jQuery),ClusterIcon.prototype.onAdd=function(){var a,b,c=this;this.div_=document.createElement("div"),this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),google.maps.event.addListener(this.getMap(),"bounds_changed",function(){b=a}),google.maps.event.addDomListener(this.div_,"mousedown",function(){a=!0,b=!1}),google.maps.event.addDomListener(this.div_,"click",function(d){if(a=!1,!b){var e,f=c.cluster_.getMarkerClusterer();google.maps.event.trigger(f,"click",c.cluster_),google.maps.event.trigger(f,"clusterclick",c.cluster_),f.getZoomOnClick()&&(e=f.getMaxZoom(),f.getMap().fitBounds(c.cluster_.getBounds()),null!==e&&f.getMap().getZoom()>e&&f.getMap().setZoom(e+1)),d.cancelBubble=!0,d.stopPropagation&&d.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var a=c.cluster_.getMarkerClusterer();google.maps.event.trigger(a,"mouseover",c.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var a=c.cluster_.getMarkerClusterer();google.maps.event.trigger(a,"mouseout",c.cluster_)})},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px",this.div_.style.left=a.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a),this.div_.innerHTML=this.cluster_.printable_?"<img src='"+this.url_+"'><div style='position: absolute; top: 0px; left: 0px; width: "+this.width_+"px;'>"+this.sums_.text+"</div>":this.sums_.text,this.div_.title=this.cluster_.getMarkerClusterer().getTitle(),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.useStyle=function(a){this.sums_=a;var b=Math.max(0,a.index-1);b=Math.min(this.styles_.length-1,b);var c=this.styles_[b];this.url_=c.url,this.height_=c.height,this.width_=c.width,this.anchor_=c.anchor,this.anchorIcon_=c.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=c.textColor||"black",this.textSize_=c.textSize||11,this.textDecoration_=c.textDecoration||"none",this.fontWeight_=c.fontWeight||"bold",this.fontStyle_=c.fontStyle||"normal",this.fontFamily_=c.fontFamily||"Arial,sans-serif",this.backgroundPosition_=c.backgroundPosition||"0 0"},ClusterIcon.prototype.setCenter=function(a){this.center_=a},ClusterIcon.prototype.createCss=function(a){var b=[];return this.cluster_.printable_||(b.push("background-image:url("+this.url_+");"),b.push("background-position:"+this.backgroundPosition_+";")),"object"==typeof this.anchor_?(b.push("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?"height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;":"height:"+this.height_+"px; line-height:"+this.height_+"px;"),b.push("number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?"width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;":"width:"+this.width_+"px; text-align:center;")):b.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;"),b.push("cursor:pointer; top:"+a.y+"px; left:"+a.x+"px; color:"+this.textColor_+"; position:absolute; font-size:"+this.textSize_+"px; font-family:"+this.fontFamily_+"; font-weight:"+this.fontWeight_+"; font-style:"+this.fontStyle_+"; text-decoration:"+this.textDecoration_+";"),b.join("")},ClusterIcon.prototype.getPosFromLatLng_=function(a){var b=this.getProjection().fromLatLngToDivPixel(a);return b.x-=this.anchorIcon_[1],b.y-=this.anchorIcon_[0],b},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){var a,b=new google.maps.LatLngBounds(this.center_,this.center_),c=this.getMarkers();for(a=0;a<c.length;a++)b.extend(c[a].getPosition());return b},Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},Cluster.prototype.addMarker=function(a){var b,c,d;if(this.isMarkerAlreadyAdded_(a))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,f=(this.center_.lat()*(e-1)+a.getPosition().lat())/e,g=(this.center_.lng()*(e-1)+a.getPosition().lng())/e;this.center_=new google.maps.LatLng(f,g),this.calculateBounds_()}}else this.center_=a.getPosition(),this.calculateBounds_();if(a.isAdded=!0,this.markers_.push(a),c=this.markers_.length,d=this.markerClusterer_.getMaxZoom(),null!==d&&this.map_.getZoom()>d)a.getMap()!==this.map_&&a.setMap(this.map_);else if(c<this.minClusterSize_)a.getMap()!==this.map_&&a.setMap(this.map_);else if(c===this.minClusterSize_)for(b=0;c>b;b++)this.markers_[b].setMap(null);else a.setMap(null);return this.updateIcon_(),!0},Cluster.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())},Cluster.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)},Cluster.prototype.updateIcon_=function(){var a=this.markers_.length,b=this.markerClusterer_.getMaxZoom();if(null!==b&&this.map_.getZoom()>b)return void this.clusterIcon_.hide();if(a<this.minClusterSize_)return void this.clusterIcon_.hide();var c=this.markerClusterer_.getStyles().length,d=this.markerClusterer_.getCalculator()(this.markers_,c);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(d),this.clusterIcon_.show()},Cluster.prototype.isMarkerAlreadyAdded_=function(a){var b;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(a);for(b=0;b<this.markers_.length;b++)if(a===this.markers_[b])return!0;return!1},MarkerClusterer.prototype.onAdd=function(){var a=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){a.resetViewport_(!1),0===this.getZoom()&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){a.redraw_()})]},MarkerClusterer.prototype.onRemove=function(){var a;for(a=0;a<this.markers_.length;a++)this.markers_[a].setMap(this.activeMap_);for(a=0;a<this.clusters_.length;a++)this.clusters_[a].remove();for(this.clusters_=[],a=0;a<this.listeners_.length;a++)google.maps.event.removeListener(this.listeners_[a]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){var a,b;if(!(this.styles_.length>0))for(a=0;a<this.imageSizes_.length;a++)b=this.imageSizes_[a],this.styles_.push({url:this.imagePath_+(a+1)+"."+this.imageExtension_,height:b,width:b})},MarkerClusterer.prototype.fitMapToMarkers=function(){var a,b=this.getMarkers(),c=new google.maps.LatLngBounds;for(a=0;a<b.length;a++)c.extend(b[a].getPosition());this.getMap().fitBounds(c)},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(a){this.gridSize_=a},MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinimumClusterSize=function(a){this.minClusterSize_=a},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.setMaxZoom=function(a){this.maxZoom_=a},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.setStyles=function(a){this.styles_=a},MarkerClusterer.prototype.getTitle=function(){return this.title_},MarkerClusterer.prototype.setTitle=function(a){this.title_=a},MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.setZoomOnClick=function(a){this.zoomOnClick_=a},MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.setAverageCenter=function(a){this.averageCenter_=a},MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},MarkerClusterer.prototype.setIgnoreHidden=function(a){this.ignoreHidden_=a},MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_},MarkerClusterer.prototype.setImageExtension=function(a){this.imageExtension_=a},MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_},MarkerClusterer.prototype.setImagePath=function(a){this.imagePath_=a},MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_},MarkerClusterer.prototype.setImageSizes=function(a){this.imageSizes_=a},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.setCalculator=function(a){this.calculator_=a},MarkerClusterer.prototype.getPrintable=function(){return this.printable_},MarkerClusterer.prototype.setPrintable=function(a){this.printable_=a},MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},MarkerClusterer.prototype.setBatchSizeIE=function(a){this.batchSizeIE_=a},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.getClusters=function(){return this.clusters_},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.addMarker=function(a,b){this.pushMarkerTo_(a),b||this.redraw_()},MarkerClusterer.prototype.addMarkers=function(a,b){var c;for(c=0;c<a.length;c++)this.pushMarkerTo_(a[c]);b||this.redraw_()},MarkerClusterer.prototype.pushMarkerTo_=function(a){if(a.getDraggable()){var b=this;google.maps.event.addListener(a,"dragend",function(){b.ready_&&(this.isAdded=!1,b.repaint())})}a.isAdded=!1,this.markers_.push(a)},MarkerClusterer.prototype.removeMarker=function(a,b){var c=this.removeMarker_(a);return!b&&c&&this.repaint(),c},MarkerClusterer.prototype.removeMarkers=function(a,b){var c,d,e=!1;for(c=0;c<a.length;c++)d=this.removeMarker_(a[c]),e=e||d;return!b&&e&&this.repaint(),e},MarkerClusterer.prototype.removeMarker_=function(a){var b,c=-1;if(this.markers_.indexOf)c=this.markers_.indexOf(a);else for(b=0;b<this.markers_.length;b++)if(a===this.markers_[b]){c=b;break}return-1===c?!1:(a.setMap(null),this.markers_.splice(c,1),!0)},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},MarkerClusterer.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var b;for(b=0;b<a.length;b++)a[b].remove()},0)},MarkerClusterer.prototype.getExtendedBounds=function(a){var b=this.getProjection(),c=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),d=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng()),e=b.fromLatLngToDivPixel(c);e.x+=this.gridSize_,e.y-=this.gridSize_;var f=b.fromLatLngToDivPixel(d);f.x-=this.gridSize_,f.y+=this.gridSize_;var g=b.fromDivPixelToLatLng(e),h=b.fromDivPixelToLatLng(f);return a.extend(g),a.extend(h),a},MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},MarkerClusterer.prototype.resetViewport_=function(a){var b,c;for(b=0;b<this.clusters_.length;b++)this.clusters_[b].remove();for(this.clusters_=[],b=0;b<this.markers_.length;b++)c=this.markers_[b],c.isAdded=!1,a&&c.setMap(null)},MarkerClusterer.prototype.distanceBetweenPoints_=function(a,b){var c=6371,d=(b.lat()-a.lat())*Math.PI/180,e=(b.lng()-a.lng())*Math.PI/180,f=Math.sin(d/2)*Math.sin(d/2)+Math.cos(a.lat()*Math.PI/180)*Math.cos(b.lat()*Math.PI/180)*Math.sin(e/2)*Math.sin(e/2),g=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),h=c*g;return h},MarkerClusterer.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())},MarkerClusterer.prototype.addToClosestCluster_=function(a){var b,c,d,e,f=4e4,g=null;for(b=0;b<this.clusters_.length;b++)d=this.clusters_[b],e=d.getCenter(),e&&(c=this.distanceBetweenPoints_(e,a.getPosition()),f>c&&(f=c,g=d));g&&g.isMarkerInClusterBounds(a)?g.addMarker(a):(d=new Cluster(this),d.addMarker(a),this.clusters_.push(d))},MarkerClusterer.prototype.createClusters_=function(a){var b,c,d,e=this;if(this.ready_){0===a&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),d=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var f=this.getExtendedBounds(d),g=Math.min(a+this.batchSize_,this.markers_.length);for(b=a;g>b;b++)c=this.markers_[b],!c.isAdded&&this.isMarkerInBounds_(c,f)&&(!this.ignoreHidden_||this.ignoreHidden_&&c.getVisible())&&this.addToClosestCluster_(c);
g<this.markers_.length?this.timerRefStatic=setTimeout(function(){e.createClusters_(g)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},MarkerClusterer.prototype.extend=function(a,b){return function(a){var b;for(b in a.prototype)this.prototype[b]=a.prototype[b];return this}.apply(a,[b])},MarkerClusterer.CALCULATOR=function(a,b){for(var c=0,d=a.length.toString(),e=d;0!==e;)e=parseInt(e/10,10),c++;return c=Math.min(c,b),{text:d,index:c}},MarkerClusterer.BATCH_SIZE=2e3,MarkerClusterer.BATCH_SIZE_IE=500,MarkerClusterer.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",MarkerClusterer.IMAGE_EXTENSION="png",MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90];var regDep={r:[{name:"Alsace",code:"42",dep:[67,68]},{name:"Aquitaine",code:"72",dep:[24,33,40,47,64]},{name:"Auvergne",code:"83",dep:["03",15,43,63]},{name:"Bourgogne",code:"26",dep:[21,58,71,89]},{name:"Bretagne",code:"53",dep:[22,29,35,56]},{name:"Centre",code:"24",dep:[18,28,36,37,41,45]},{name:"Champagne-Ardenne",code:"21",dep:["08",10,51,52]},{name:"Corse",code:"94",dep:["2A","2B"]},{name:"Franche-Comté",code:"43",dep:[25,39,70,90]},{name:"Guadeloupe",code:"01",dep:[971]},{name:"Guyane",code:"03",dep:[973]},{name:"Île-de-France",code:"11",dep:[75,91,92,93,77,94,95,78]},{name:"Languedoc-Roussillon",code:"91",dep:[11,30,34,48,66]},{name:"Limousin",code:"74",dep:[74,19,23,87]},{name:"Lorraine",code:"41",dep:[54,55,57,88]},{name:"Martinique",code:"02",dep:[972]},{name:"Mayotte",code:"06",dep:[976]},{name:"Midi-Pyrénées",code:"73",dep:["09",12,31,32,46,65,81,82]},{name:"Nord-Pas-de-Calais",code:"31",dep:[59,62]},{name:"Basse-Normandie",code:"25",dep:[14,50,61]},{name:"Haute-Normandie",code:"23",dep:[27,76]},{name:"Pays de la Loire",code:"52",dep:[44,49,53,72,85]},{name:"Picardie",code:"22",dep:["02",60,80]},{name:"Poitou-Charentes",code:"54",dep:[16,17,79,86]},{name:"Provence-Alpes-Côte d'Azur",code:"93",dep:["04","05","06",13,83,84]},{name:"La Réunion",code:"04",dep:[974]},{name:"Rhône-Alpes",code:"82",dep:["01","07",26,38,42,69,73,74]}],d:[{code:"01",name:"Ain"},{code:"02",name:"Aisne"},{code:"03",name:"Allier"},{code:"04",name:"Alpes-de-Haute-Provence"},{code:"05",name:"Hautes-Alpes"},{code:"06",name:"Alpes-Maritimes"},{code:"07",name:"Ardèche"},{code:"08",name:"Ardennes"},{code:"09",name:"Ariège"},{code:"10",name:"Aube"},{code:"11",name:"Aude"},{code:"12",name:"Aveyron"},{code:"13",name:"Bouches-du-Rhône"},{code:"14",name:"Calvados"},{code:"15",name:"Cantal"},{code:"16",name:"Charente"},{code:"17",name:"Charente-Maritime"},{code:"18",name:"Cher"},{code:"19",name:"Corrèze"},{code:"2A",name:"Corse-du-Sud"},{code:"2B",name:"Haute-Corse"},{code:"21",name:"Côte-d'Or"},{code:"22",name:"Côtes-d'Armor"},{code:"23",name:"Creuse"},{code:"24",name:"Dordogne"},{code:"25",name:"Doubs"},{code:"26",name:"Drôme"},{code:"27",name:"Eure"},{code:"28",name:"Eure-et-Loir"},{code:"29",name:"Finistère"},{code:"30",name:"Gard"},{code:"31",name:"Haute-Garonne"},{code:"32",name:"Gers"},{code:"33",name:"Gironde"},{code:"34",name:"Hérault"},{code:"35",name:"Ille-et-Vilaine"},{code:"36",name:"Indre"},{code:"37",name:"Indre-et-Loire"},{code:"38",name:"Isère"},{code:"39",name:"Jura"},{code:"40",name:"Landes"},{code:"41",name:"Loir-et-Cher"},{code:"42",name:"Loire"},{code:"43",name:"Haute-Loire"},{code:"44",name:"Loire-Atlantique"},{code:"45",name:"Loiret"},{code:"46",name:"Lot"},{code:"47",name:"Lot-et-Garonne"},{code:"48",name:"Lozère"},{code:"49",name:"Maine-et-Loire"},{code:"50",name:"Manche"},{code:"51",name:"Marne"},{code:"52",name:"Haute-Marne"},{code:"53",name:"Mayenne"},{code:"54",name:"Meurthe-et-Moselle"},{code:"55",name:"Meuse"},{code:"56",name:"Morbihan"},{code:"57",name:"Moselle"},{code:"58",name:"Nièvre"},{code:"59",name:"Nord"},{code:"60",name:"Oise"},{code:"61",name:"Orne"},{code:"62",name:"Pas-de-Calais"},{code:"63",name:"Puy-de-Dôme"},{code:"64",name:"Pyrénées-Atlantiques"},{code:"65",name:"Hautes-Pyrénées"},{code:"66",name:"Pyrénées-Orientales"},{code:"67",name:"Bas-Rhin"},{code:"68",name:"Haut-Rhin"},{code:"69",name:"Rhône"},{code:"70",name:"Haute-Saône"},{code:"71",name:"Saône-et-Loire"},{code:"72",name:"Sarthe"},{code:"73",name:"Savoie"},{code:"74",name:"Haute-Savoie"},{code:"75",name:"Paris"},{code:"76",name:"Seine-Maritime"},{code:"77",name:"Seine-et-Marne"},{code:"78",name:"Yvelines"},{code:"79",name:"Deux-Sèvres"},{code:"80",name:"Somme"},{code:"81",name:"Tarn"},{code:"82",name:"Tarn-et-Garonne"},{code:"83",name:"Var"},{code:"84",name:"Vaucluse"},{code:"85",name:"Vendée"},{code:"86",name:"Vienne"},{code:"87",name:"Haute-Vienne"},{code:"88",name:"Vosges"},{code:"89",name:"Yonne"},{code:"90",name:"Territoire de Belfort"},{code:"91",name:"Essonne"},{code:"92",name:"Hauts-de-Seine"},{code:"93",name:"Seine-Saint-Denis"},{code:"94",name:"Val-de-Marne"},{code:"95",name:"Val-d'Oise"},{code:"971",name:"Guadeloupe"},{code:"972",name:"Martinique"},{code:"973",name:"Guyane"},{code:"974",name:"La Réunion"},{code:"976",name:"Mayotte"}]},mvs={t:{auto:{name:"Auto",id:2},moto:{name:"Moto",id:3},collection:{name:"Collection",id:1}},c:{auto:{balade:{id:200,name:"Balade, Randonnée, Sortie, Rallye, Ronde, Promenade"},bourse:{id:210,name:"Bourse, Brocante, Puces, Vide-greniers, Foire"},course:{id:220,name:"Course (circuit), Grand Prix, V.H.C., Raid "},exposition:{id:230,name:"Exposition"},rassemblement:{id:240,name:"Rassemblement, Concentration, Démonstration, Parade"},salon:{id:250,name:"Salon"},enchere:{id:260,name:"Vente (aux enchères)"},assemblee:{id:270,name:"Assemblée générale Club"}},moto:{balade:{id:400,name:"Balade, Randonnée, Sortie"},bourse:{id:410,name:"Bourse"},course:{id:420,name:"Course (circuit), Grand Prix, Rallye"},exposition:{id:430,name:"Exposition"},rassemblement:{id:440,name:"Rassemblement, concentration"},salon:{id:450,name:"Salon"},enchere:{id:460,name:"Vente (aux enchères)"}},collection:{brocante:{id:10,name:"Antiquités-brocante"},braderie:{id:20,name:"Vide-greniers - braderie"},videgrenier:{id:30,name:"Brocante et vide-greniers"},multi:{id:40,name:"Salon ou bourse multi collection"},special:{id:50,name:"Salon ou bourse spécialisé (collection)"},jouet:{id:60,name:"Salon ou bourse de jouets"},exposition:{id:70,name:"Exposition"},enchere:{id:80,name:"Ventes aux enchères"},collections:{id:90,name:"Brocante et collections"}}}};$(function(){builReg(),builDep(),buildType(),datePicker(),debugMode(),tableAlter(),formValidate(),cleanSearch()});